<div class="assignee userBlock">

    <a data-ng-if="pullRequest.elders.length > 0" data-target="#modalCheck{{pullRequest.id}}" data-ng-click="assignmentAction(pullRequest, assignment)" data-toggle="{{elderCheckModal}}" class="assignMe {{assignmentStyle}}" title="{{assignTitle | translate}}">
        <img class="avatarWrapper" data-ng-if="pullRequest.assignee" data-ng-src="{{pullRequest.assignee.avatarUrl}}">
    </a>

    <a data-ng-if="!pullRequest.elders || pullRequest.elders.length === 0" data-target="#modal{{pullRequest.id}}" data-ng-click="assignmentAction(pullRequest, assignment)" data-toggle="{{assignmentModal}}" class="assignMe {{assignmentStyle}}" title="{{assignTitle | translate}}">
        <img class="avatarWrapper" data-ng-if="pullRequest.assignee" data-ng-src="{{pullRequest.assignee.avatarUrl}}">
    </a>

    <a data-ng-if="pullRequest.assignee" target="_blank" data-ng-href="pullRequest.assignee.profileUrl" class="userName">
        <span>{{getName(pullRequest.assignee)}}</span>
        <span class="subName" data-ng-if="pullRequest.assignee.fullName">{{pullRequest.assignee.username}}</span>
    </a>

</div>

<!-- modal dialog for assigning pull requests while elder pull requests exist-->
<div class="modal fade" data-ng-if="elderCheckModal" id="modalCheck{{pullRequest.id}}">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a type="button" class="closeBtn" data-dismiss="modal"></a>
                <h4 class="modal-title">
                    {{'dashboard.pullRequest.assign.checkModal.headline' | translate}}
                </h4>
            </div>

            <div ng-class="{true:'signal-modal-body', false:'gray-modal-body'}[$first==true];" data-ng-repeat="elderPullRequest in pullRequest.elders | orderBy:'createdAt'">
                <div class="facts prInfos">
                    <div class="row">
                        #{{elderPullRequest.number}} {{elderPullRequest.title}}
                        from {{elderPullRequest.createdAt | date: 'dd.MM.yyyy HH:mm:ss'}}
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="button butChancel floatL" data-dismiss="modal">{{'global.btn.cancel' | translate}}</button>
                <button class="button butDanger" data-dismiss="modal" data-ng-click="confirmOtherAssignment((pullRequest.elders| orderBy:'createdAt')[0])">{{'dashboard.pullRequest.assign.checkModal.btn.assignOldest' | translate}}</button>
                <button class="button" data-dismiss="modal" data-ng-click="confirmAssignment()">{{'dashboard.pullRequest.assign.checkModal.btn.assignSelected' | translate}}</button>
            </div>
        </div>
    </div>
</div>

<!-- modal dialog for already assigned pull requests-->
<div class="modal fade" data-ng-if="assignmentModal" id="modal{{pullRequest.id}}">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a type="button" class="closeBtn" data-dismiss="modal"></a>
                <h4 class="modal-title">
                    {{'dashboard.pullRequest.assign.modal.headline' | translate}}
                </h4>
            </div>
            <p class="modal-body">{{'dashboard.pullRequest.assign.modal.text' | translate}}</p>
            <div class="modal-footer">
                <button class="button butChancel floatL" data-dismiss="modal">{{'global.btn.cancel' | translate}}</button>
                <button class="button" data-dismiss="modal" data-ng-click="confirmAssignment()">{{'global.btn.confirm' | translate}}</button>
            </div>
        </div>
    </div>
</div>
